(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"z/QQ":function(e,t,r){"use strict";r.r(t);var n=r("ofXK"),a=r("ebz3"),i=r("tyNb"),o=r("Dh3D"),s=r("+0xr"),l=r("0IaG"),c=r("3Pt+"),m=r("fXoL"),d=r("A4b0"),u=r("GDbA"),p=r("6Qg2"),f=r("OC8m"),h=r("AytR"),v=r("lJxs"),b=r("tk/3");let g=(()=>{class e{constructor(e){this.http=e}create(e){return this.http.post(`${h.a.apiUrl}/performance`,e)}getAllByMatchId(e){return this.http.get(`${h.a.apiUrl}/performance/find-performaces-match/${e}`)}getAll(){return this.http.get(`${h.a.apiUrl}/performance`)}getById(e){return this.http.get(`${h.a.apiUrl}/performance/${e}`)}remove(e){return this.http.delete(`${h.a.apiUrl}/performance/${e}`)}update(e,t){return this.http.put(`${h.a.apiUrl}/performance/${e}`,t).pipe(Object(v.a)(e=>e))}}return e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275inject"](b.b))},e.\u0275prov=m["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var C=r("/n7v"),S=r("xHqg"),y=r("XiUz"),x=r("ZOsW"),w=r("znSr");const F=["stepper"];function T(e,t){1&e&&m["\u0275\u0275text"](0,"Partida")}function I(e,t){1&e&&m["\u0275\u0275text"](0,"Individual")}const _=function(e){return{"is-invalid-select":e}},P=function(e){return{"is-invalid":e}};function E(e,t){if(1&e){const e=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"form",6),m["\u0275\u0275listener"]("ngSubmit",(function(){m["\u0275\u0275restoreView"](e);const r=t.index;return m["\u0275\u0275nextContext"]().salvarPerformace(r)})),m["\u0275\u0275elementStart"](2,"div",21),m["\u0275\u0275element"](3,"ng-select",22),m["\u0275\u0275element"](4,"input",23),m["\u0275\u0275element"](5,"input",24),m["\u0275\u0275element"](6,"input",25),m["\u0275\u0275element"](7,"input",26),m["\u0275\u0275elementStart"](8,"button",27),m["\u0275\u0275text"](9," Salvar"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,r=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("formGroup",e),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("items",r.usuariosList)("ngClass",m["\u0275\u0275pureFunction1"](7,_,r.submitted&&e.controls.player.errors)),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngClass",m["\u0275\u0275pureFunction1"](9,P,r.submitted&&e.controls.rating.errors)),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngClass",m["\u0275\u0275pureFunction1"](11,P,r.submitted&&e.controls.kills.errors)),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngClass",m["\u0275\u0275pureFunction1"](13,P,r.submitted&&e.controls.assists.errors)),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngClass",m["\u0275\u0275pureFunction1"](15,P,r.submitted&&e.controls.deaths.errors))}}let O=(()=>{class e{constructor(e,t,r,n,a,i,o,s){this.formBuilder=e,this.partidaService=t,this.timeService=r,this.dialogRef=n,this.usuarioService=a,this.notificationService=i,this.performanceService=o,this.data=s,this.timesList=[],this.submitted=!1,this.isLinear=!0,this.usuariosList=[],this.performances=new c.e([]),this.buscarTimesContras(this.usuarioService.userValue.data.teamId),this.criarForm(this.data.partida)}ngOnInit(){}criarForm(e){this.form=this.formBuilder.group({_id:[e?e._id:null],teamHome:[{_id:this.usuarioService.userValue.data.teamId}],teamAgainst:[e.teamAgainst?e.teamAgainst._id:null,c.F.required],date:[e&&e.date?this.convertDateIsoTimezone(e.date):(new Date).toISOString().slice(0,16),c.F.required],scoreboardTeamAgainst:[e?e.scoreboardTeamAgainst:null,c.F.required],scoreboardTeamHome:[e?e.scoreboardTeamHome:null,c.F.required],learnings:[e?e.learnings:null,c.F.required],roundsToObserve:[e?e.roundsToObserve:null,c.F.required]})}convertDateIsoTimezone(e){var t=new Date(e);return new Date(t.getTime()-6e4*t.getTimezoneOffset()).toISOString().slice(0,16)}get f(){return this.form.controls}onNoClick(){this.dialogRef.close()}salvarPartida(){this.submitted=!0,this.form.invalid?console.log("invalido"):this.form.get("_id").value?this.partidaService.update(this.form.get("_id").value,this.form.value).subscribe(e=>{this.notificationService.showCreateSuccess(),this.myStepper.next(),this.submitted=!1},e=>{console.log(e)}):this.partidaService.create(this.form.value).subscribe(e=>{this.form.get("_id").setValue(e._id),this.notificationService.showCreateSuccess(),this.myStepper.next(),this.submitted=!1},e=>{console.log(e)})}criarNovoTime(e){this.timeService.create({_id:null,name:e,teamOwner:{_id:this.usuarioService.userValue.data.teamId}}).subscribe(e=>{this.timesList.push(e),this.timesList=[...this.timesList]},e=>{})}removerTime(e){this.timeService.remove(e.value._id).subscribe(e=>{this.notificationService.showCreateSuccess()},e=>{})}buscarTimesContras(e){this.timeService.buscarTimesContras().subscribe(e=>{this.timesList=e},e=>{console.log(e)})}abaPerformace(e){1===e.selectedIndex?(this.buscarMembrosTime(this.usuarioService.userValue.data.teamId),this.performanceService.getAllByMatchId(this.form.get("_id").value).subscribe(e=>{e.forEach(e=>{this.performances.push(this.criarFormPerformaces(e))})},e=>{console.log(e)})):this.performances.clear()}addPerformaceForm(){this.performances.push(this.criarFormPerformaces())}criarFormPerformaces(e){return this.formBuilder.group({_id:[e?e._id:null],player:[e&&e.player?e.player._id:null,c.F.required],rating:[e?e.rating:null,c.F.required],kills:[e?e.kills:null,c.F.required],assists:[e?e.assists:null,c.F.required],deaths:[e?e.deaths:null,c.F.required],match:[]})}fperformace(e){return this.performances.controls[e]}salvarPerformace(e){const t=this.performances.controls[e];this.submitted=!0,t.invalid?console.log("invalido"):(t.value.player={_id:t.value.player},t.value.match={_id:this.form.get("_id").value},t.get("_id").value?this.performanceService.update(t.get("_id").value,t.value).subscribe(e=>{this.notificationService.showCreateSuccess()},e=>{console.log(e)}):this.performanceService.create(t.value).subscribe(e=>{this.form.get("_id").setValue(e._id),this.notificationService.showCreateSuccess()},e=>{console.log(e)}))}buscarMembrosTime(e){this.timeService.buscarUsuariosMembros(e).subscribe(e=>{this.usuariosList=e},e=>{console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](c.g),m["\u0275\u0275directiveInject"](d.a),m["\u0275\u0275directiveInject"](u.a),m["\u0275\u0275directiveInject"](l.h),m["\u0275\u0275directiveInject"](p.a),m["\u0275\u0275directiveInject"](f.a),m["\u0275\u0275directiveInject"](g),m["\u0275\u0275directiveInject"](l.a))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["app-match-form"]],viewQuery:function(e,t){var r;1&e&&m["\u0275\u0275viewQuery"](F,!0),2&e&&m["\u0275\u0275queryRefresh"](r=m["\u0275\u0275loadQuery"]())&&(t.myStepper=r.first)},decls:24,vars:20,consts:[["cardTitle","Dados da Partida",3,"options"],[3,"linear","selectionChange"],["stepper",""],[3,"stepControl"],["matStepLabel",""],["mat-dialog-content",""],[3,"formGroup","ngSubmit"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","space-between center",1,"mb-3"],["fxFlex","45","formControlName","teamAgainst","addTagText","Criar Novo","placeholder","Time Contra","bindLabel","name","bindValue","_id",3,"addTag","multiple","ngClass","items","remove"],["fxFlex","45","type","datetime-local","formControlName","date","placeholder","Data",1,"form-control",3,"ngClass"],["fxLayout","row","fxLayoutAlign","space-between center",1,"mb-3"],["fxFlex","45","type","number","formControlName","scoreboardTeamAgainst","placeholder","Pontos Time Contra",1,"form-control",3,"ngClass"],["fxFlex","45","type","number","formControlName","scoreboardTeamHome","placeholder","Pontos Nosso Time ",1,"form-control",3,"ngClass"],[1,"input-group","mb-3"],["type","text","formControlName","learnings","placeholder","Resumo Aprendizado",1,"form-control"],["type","text","formControlName","roundsToObserve","placeholder","Rounds \xe0 Observar ",1,"form-control"],["type","submit",1,"btn","btn-primary","mb-4"],["matStepLabel","",3,"click"],["type","button",1,"btn","btn-icon","btn-success",3,"click"],[1,"feather","icon-plus"],[4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","space-between center",1,"mb-4"],["fxFlex","20","formControlName","player","bindLabel","name","bindValue","_id",3,"items","ngClass"],["fxFlex","15","type","rating","formControlName","rating","placeholder","Rating",1,"form-control",3,"ngClass"],["fxFlex","15","type","kills","formControlName","kills","placeholder","Kills",1,"form-control",3,"ngClass"],["fxFlex","15","type","assists","formControlName","assists","placeholder","Assists",1,"form-control",3,"ngClass"],["fxFlex","15","type","deaths","formControlName","deaths","placeholder","Deaths",1,"form-control",3,"ngClass"],["fxFlex","15","type","submit",1,"btn","btn-primary"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"app-card",0),m["\u0275\u0275elementStart"](1,"mat-horizontal-stepper",1,2),m["\u0275\u0275listener"]("selectionChange",(function(e){return t.abaPerformace(e)})),m["\u0275\u0275elementStart"](3,"mat-step",3),m["\u0275\u0275template"](4,T,1,0,"ng-template",4),m["\u0275\u0275elementStart"](5,"div",5),m["\u0275\u0275elementStart"](6,"form",6),m["\u0275\u0275listener"]("ngSubmit",(function(){return t.salvarPartida()})),m["\u0275\u0275elementStart"](7,"div",7),m["\u0275\u0275elementStart"](8,"ng-select",8),m["\u0275\u0275listener"]("remove",(function(e){return t.removerTime(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](9,"input",9),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"div",10),m["\u0275\u0275element"](11,"input",11),m["\u0275\u0275element"](12,"input",12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"div",13),m["\u0275\u0275element"](14,"textarea",14),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](15,"div",13),m["\u0275\u0275element"](16,"input",15),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"button",16),m["\u0275\u0275text"](18," Salvar"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](19,"mat-step"),m["\u0275\u0275template"](20,I,1,0,"ng-template",17),m["\u0275\u0275listener"]("click",(function(){return t.abaPerformace()})),m["\u0275\u0275elementStart"](21,"button",18),m["\u0275\u0275listener"]("click",(function(){return t.addPerformaceForm()})),m["\u0275\u0275element"](22,"i",19),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](23,E,10,17,"div",20),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275property"]("options",!1),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("linear",null==t.f._id.value),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("stepControl",t.form),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("formGroup",t.form),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("addTag",t.criarNovoTime.bind(t))("multiple",!1)("ngClass",m["\u0275\u0275pureFunction1"](12,_,t.submitted&&t.f.teamAgainst.errors))("items",t.timesList),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngClass",m["\u0275\u0275pureFunction1"](14,P,t.submitted&&t.f.date.errors)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass",m["\u0275\u0275pureFunction1"](16,P,t.submitted&&t.f.scoreboardTeamAgainst.errors)),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngClass",m["\u0275\u0275pureFunction1"](18,P,t.submitted&&t.f.scoreboardTeamHome.errors)),m["\u0275\u0275advance"](11),m["\u0275\u0275property"]("ngForOf",t.performances.controls))},directives:[C.a,S.a,S.b,S.d,l.f,c.H,c.s,c.j,y.f,y.e,x.a,y.b,c.r,c.i,n.NgClass,w.a,c.c,c.x,n.NgForOf],styles:[".is-invalid-select[_ngcontent-%COMP%]{border:1px solid red}"]}),e})();function A(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"th",13),m["\u0275\u0275text"](1," Time contra "),m["\u0275\u0275elementEnd"]())}function D(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"td",14),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",e.teamAgainst.name," ")}}function M(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"th",13),m["\u0275\u0275text"](1," Placar "),m["\u0275\u0275elementEnd"]())}function L(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"td",14),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate2"](" ",e.scoreboardTeamAgainst," x ",e.scoreboardTeamHome," ")}}function k(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"th",13),m["\u0275\u0275text"](1," Rounds a observar "),m["\u0275\u0275elementEnd"]())}function j(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"td",14),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",e.roundsToObserve," ")}}function N(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"th",15),m["\u0275\u0275text"](1," Aprendizados "),m["\u0275\u0275elementEnd"]())}function z(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"td",16),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",e.learnings,"")}}function R(e,t){1&e&&m["\u0275\u0275element"](0,"tr",17)}function $(e,t){if(1&e){const e=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"tr",18),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](e);const r=t.$implicit;return m["\u0275\u0275nextContext"]().cadastrarPartida(r)})),m["\u0275\u0275elementEnd"]()}}const q=[{path:"",component:(()=>{class e{constructor(e,t,r){this.partidaService=e,this.itensService=t,this.dialog=r,this.displayedColumns=["timeContra","placar","roundsToObserve","learnings"],this.dataSource=new s.o,this.playerName="",this.term="",this.tipoItemFiltro=1,this.sort=new o.a}set matSort(e){this.sort=e,this.setDataSourceAttributes()}ngOnInit(){this.fazBuscaItens()}setDataSourceAttributes(){this.dataSource.sort=this.sort}ngAfterViewInit(){this.dataSource.sort=this.sort}fazBuscaItens(){this.partidaService.getAll().subscribe(e=>this.dataSource=new s.o(e)),this.dataSource.sort=this.sort,setTimeout(()=>{this.dataSource.sort=this.sort},1e3)}cadastrarPartida(e){this.dialog.open(O,{width:"1000px",data:{partida:e}}).afterClosed().subscribe(e=>{this.fazBuscaItens()})}}return e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](d.a),m["\u0275\u0275directiveInject"](d.a),m["\u0275\u0275directiveInject"](l.b))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["matches-table"]],viewQuery:function(e,t){var r;1&e&&m["\u0275\u0275viewQuery"](o.a,!0),2&e&&m["\u0275\u0275queryRefresh"](r=m["\u0275\u0275loadQuery"]())&&(t.matSort=r.first)},decls:18,vars:4,consts:[["fxLayout","row","fxLayoutAlign","end center"],["type","button","ngbTooltip","btn-info",1,"btn","btn-info",3,"click"],["mat-table","","matSort","","flex","100",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","timeContra"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","placar"],["matColumnDef","roundsToObserve"],["matColumnDef","learnings"],["mat-header-cell","","mat-sort-header","","class","width50",4,"matHeaderCellDef"],["mat-cell","","class","width50",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"width50"],["mat-cell","",1,"width50"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",0),m["\u0275\u0275elementStart"](1,"button",1),m["\u0275\u0275listener"]("click",(function(e){return t.cadastrarPartida(e)})),m["\u0275\u0275text"](2,"Cadastrar"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"table",2),m["\u0275\u0275elementContainerStart"](4,3),m["\u0275\u0275template"](5,A,2,0,"th",4),m["\u0275\u0275template"](6,D,2,1,"td",5),m["\u0275\u0275elementContainerEnd"](),m["\u0275\u0275elementContainerStart"](7,6),m["\u0275\u0275template"](8,M,2,0,"th",4),m["\u0275\u0275template"](9,L,2,2,"td",5),m["\u0275\u0275elementContainerEnd"](),m["\u0275\u0275elementContainerStart"](10,7),m["\u0275\u0275template"](11,k,2,0,"th",4),m["\u0275\u0275template"](12,j,2,1,"td",5),m["\u0275\u0275elementContainerEnd"](),m["\u0275\u0275elementContainerStart"](13,8),m["\u0275\u0275template"](14,N,2,0,"th",9),m["\u0275\u0275template"](15,z,2,1,"td",10),m["\u0275\u0275elementContainerEnd"](),m["\u0275\u0275template"](16,R,1,0,"tr",11),m["\u0275\u0275template"](17,$,1,0,"tr",12),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("dataSource",t.dataSource),m["\u0275\u0275advance"](13),m["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns))},directives:[y.f,y.e,s.n,o.a,s.c,s.i,s.b,s.k,s.m,s.h,o.b,s.a,s.j,s.l],styles:["table.mat-table[_ngcontent-%COMP%]{display:table;width:100%}table.mat-table[_ngcontent-%COMP%]   th.mat-sort-header-sorted[_ngcontent-%COMP%]{color:#000}.width100[_ngcontent-%COMP%]{width:100%}.width50[_ngcontent-%COMP%]{width:50%}.width25[_ngcontent-%COMP%]{width:25%}.espacamento[_ngcontent-%COMP%]{margin-right:15px}.verde[_ngcontent-%COMP%]{color:green}.vermelho[_ngcontent-%COMP%]{color:red}.azul[_ngcontent-%COMP%]{color:#00f}.fundo-verde[_ngcontent-%COMP%]{background-color:#95f595}.icon-star[_ngcontent-%COMP%]{fill:red}.icon-fav[_ngcontent-%COMP%]{font-size:30px;cursor:pointer}"]}),e})()}];let H=(()=>{class e{}return e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.j.forChild(q)],i.j]}),e})();r.d(t,"MatchesTableModule",(function(){return V}));let V=(()=>{class e{}return e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[n.CommonModule,H,a.a,n.CommonModule]]}),e})()}}]);