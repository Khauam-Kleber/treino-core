function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{IzTB:function(e,t,r){"use strict";r.r(t);var n=r("ofXK"),i=r("ebz3"),o=r("tyNb"),a=r("3Pt+"),s=r("fXoL"),u=r("GDbA"),l=r("OC8m"),c=r("6Qg2"),m=r("/n7v"),f=r("znSr"),d=r("ZOsW");function v(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275text"](1,"Informe um name"),s["\u0275\u0275elementEnd"]())}function p(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",10),s["\u0275\u0275template"](1,v,2,0,"div",11),s["\u0275\u0275elementEnd"]()),2&e){var r=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",r.f.name.errors.required)}}function b(e,t){if(1&e){var r=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",5),s["\u0275\u0275elementStart"](1,"label"),s["\u0275\u0275text"](2,"Membros:"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"ng-select",12),s["\u0275\u0275listener"]("remove",(function(e){return s["\u0275\u0275restoreView"](r),s["\u0275\u0275nextContext"](2).removerMembro(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var n=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("addTag",n.criarNovoMembro.bind(n))("multiple",!0)("items",n.usuariosList)}}var y=function(e){return{"is-invalid":e}};function h(e,t){if(1&e){var r=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"form",4),s["\u0275\u0275listener"]("ngSubmit",(function(){return s["\u0275\u0275restoreView"](r),s["\u0275\u0275nextContext"]().salvar()})),s["\u0275\u0275elementStart"](1,"div",5),s["\u0275\u0275elementStart"](2,"label"),s["\u0275\u0275text"](3,"Nome do Time:"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](4,"input",6),s["\u0275\u0275template"](5,p,2,1,"div",7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](6,b,4,3,"div",8),s["\u0275\u0275elementStart"](7,"button",9),s["\u0275\u0275text"](8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("formGroup",n.form),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngClass",s["\u0275\u0275pureFunction1"](5,y,n.submitted&&n.f.name.errors)),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",n.submitted&&n.f.name.errors),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",n.f._id.value),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](n.f._id.value?"Editar":"Salvar")}}var g,S,_=[{path:"",component:(g=function(){function e(t,r,n,i){var o=this;_classCallCheck(this,e),this.formBuilder=t,this.timeService=r,this.notificationService=n,this.usuarioService=i,this.submitted=!1,this.usuariosList=[],this.usuarioService.userValue.data.teamId?(this.buscarMembrosTime(this.usuarioService.userValue.data.teamId),this.timeService.getById(this.usuarioService.userValue.data.teamId).subscribe((function(e){o.criarForm(e)}),(function(e){}))):this.criarForm()}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"criarForm",value:function(e){var t=[];e&&e.users&&(t=e.users.map((function(e){return e._id}))),this.form=this.formBuilder.group({_id:[e?e._id:null],name:[e?e.name:"",a.F.required],users:[t]})}},{key:"f",get:function(){return this.form.controls}},{key:"criarNovoMembro",value:function(e){var t=this,r={_id:null,name:e,team:{_id:this.form.get("_id").value}};this.usuarioService.create(r).subscribe((function(e){t.usuariosList.push(e),t.usuariosList=_toConsumableArray(t.usuariosList);var r=t.form.get("users").value;r.push(e._id),t.form.get("users").setValue(r),t.notificationService.showCreateSuccess("Fa\xe7a o login!")}),(function(e){t.notificationService.showError("Nome j\xe1 existe!")}))}},{key:"removerMembro",value:function(e){}},{key:"salvar",value:function(){var e=this;if(this.submitted=!0,this.form.invalid)console.log("invalido");else{var t=this.form.value;if(null!=t.usuarios){var r=t.usuarios.map((function(e){return{_id:e._id}}));t.usuarios=r}this.form.get("_id").value?this.timeService.update(this.form.get("_id").value,t).subscribe((function(t){e.notificationService.showUpdateSuccess()}),(function(e){console.log(e)})):this.timeService.create(t).subscribe((function(t){e.form.get("_id").setValue(t._id),e.usuarioService.userValue.data.teamId=t._id,e.usuarioService.updateCurrentUser(e.usuarioService.userValue),e.buscarMembrosTime(t._id);var r=e.form.get("users").value;r.push(t.users[0]._id),e.form.get("users").setValue(r),e.notificationService.showCreateSuccess()}),(function(e){console.log(e)})),console.log(this.form.value)}}},{key:"buscarMembrosTime",value:function(e){var t=this;this.timeService.buscarUsuariosMembros(e).subscribe((function(e){t.usuariosList=e,t.usuariosList[0].disabled=!0}),(function(e){console.log(e)}))}}]),e}(),g.\u0275fac=function(e){return new(e||g)(s["\u0275\u0275directiveInject"](a.g),s["\u0275\u0275directiveInject"](u.a),s["\u0275\u0275directiveInject"](l.a),s["\u0275\u0275directiveInject"](c.a))},g.\u0275cmp=s["\u0275\u0275defineComponent"]({type:g,selectors:[["app-team-form"]],decls:4,vars:2,consts:[["cardTitle","Dados do Time",3,"options"],[1,"row"],[1,"col-md-12"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-group"],["type","text","formControlName","name","placeholder","Nome",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["class","form-group",4,"ngIf"],["type","submit",1,"btn","btn-primary"],[1,"invalid-feedback"],[4,"ngIf"],["formControlName","users","addTagText","Criar Novo","bindLabel","name","bindValue","_id",3,"addTag","multiple","items","remove"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"app-card",0),s["\u0275\u0275elementStart"](1,"div",1),s["\u0275\u0275elementStart"](2,"div",2),s["\u0275\u0275template"](3,h,9,7,"form",3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275property"]("options",!1),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngIf",t.form))},directives:[m.a,n.NgIf,a.H,a.s,a.j,a.c,a.r,a.i,n.NgClass,f.a,d.a],styles:[""]}),g)}],C=((S=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=s["\u0275\u0275defineNgModule"]({type:S}),S.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(e){return new(e||S)},imports:[[o.j.forChild(_)],o.j]}),S);r.d(t,"MatchesTableModule",(function(){return w}));var I,w=((I=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=s["\u0275\u0275defineNgModule"]({type:I}),I.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(e){return new(e||I)},imports:[[n.CommonModule,C,i.a,n.CommonModule]]}),I)}}]);