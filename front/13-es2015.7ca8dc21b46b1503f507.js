(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{IzTB:function(e,t,r){"use strict";r.r(t);var i=r("ofXK"),s=r("ebz3"),n=r("tyNb"),o=r("3Pt+"),a=r("fXoL"),u=r("GDbA"),m=r("OC8m"),l=r("6Qg2"),c=r("/n7v"),d=r("znSr"),f=r("ZOsW");function v(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275text"](1,"Informe um name"),a["\u0275\u0275elementEnd"]())}function p(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",10),a["\u0275\u0275template"](1,v,2,0,"div",11),a["\u0275\u0275elementEnd"]()),2&e){const e=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.f.name.errors.required)}}function h(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",5),a["\u0275\u0275elementStart"](1,"label"),a["\u0275\u0275text"](2,"Membros:"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"ng-select",12),a["\u0275\u0275listener"]("remove",(function(t){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"](2).removerMembro(t)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("addTag",e.criarNovoMembro.bind(e))("multiple",!0)("items",e.usuariosList)}}const b=function(e){return{"is-invalid":e}};function g(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"form",4),a["\u0275\u0275listener"]("ngSubmit",(function(){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().salvar()})),a["\u0275\u0275elementStart"](1,"div",5),a["\u0275\u0275elementStart"](2,"label"),a["\u0275\u0275text"](3,"Nome do Time:"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"input",6),a["\u0275\u0275template"](5,p,2,1,"div",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](6,h,4,3,"div",8),a["\u0275\u0275elementStart"](7,"button",9),a["\u0275\u0275text"](8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("formGroup",e.form),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](5,b,e.submitted&&e.f.name.errors)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.submitted&&e.f.name.errors),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.f._id.value),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](e.f._id.value?"Editar":"Salvar")}}const S=[{path:"",component:(()=>{class e{constructor(e,t,r,i){this.formBuilder=e,this.timeService=t,this.notificationService=r,this.usuarioService=i,this.submitted=!1,this.usuariosList=[],this.usuarioService.userValue.data.teamId?(this.buscarMembrosTime(this.usuarioService.userValue.data.teamId),this.timeService.getById(this.usuarioService.userValue.data.teamId).subscribe(e=>{this.criarForm(e)},e=>{})):this.criarForm()}ngOnInit(){}criarForm(e){var t=[];e&&e.users&&(t=e.users.map((function(e){return e._id}))),this.form=this.formBuilder.group({_id:[e?e._id:null],name:[e?e.name:"",o.F.required],users:[t]})}get f(){return this.form.controls}criarNovoMembro(e){let t={_id:null,name:e,team:{_id:this.form.get("_id").value}};this.usuarioService.create(t).subscribe(e=>{this.usuariosList.push(e),this.usuariosList=[...this.usuariosList];let t=this.form.get("users").value;t.push(e._id),this.form.get("users").setValue(t),this.notificationService.showCreateSuccess("Fa\xe7a o login!")},e=>{this.notificationService.showError("Nome j\xe1 existe!")})}removerMembro(e){}salvar(){if(this.submitted=!0,this.form.invalid)return void console.log("invalido");let e=this.form.value;if(null!=e.usuarios){let t=e.usuarios.map((function(e){return{_id:e._id}}));e.usuarios=t}this.form.get("_id").value?this.timeService.update(this.form.get("_id").value,e).subscribe(e=>{this.notificationService.showUpdateSuccess()},e=>{console.log(e)}):this.timeService.create(e).subscribe(e=>{this.form.get("_id").setValue(e._id),this.usuarioService.userValue.data.teamId=e._id,this.usuarioService.updateCurrentUser(this.usuarioService.userValue),this.buscarMembrosTime(e._id);let t=this.form.get("users").value;t.push(e.users[0]._id),this.form.get("users").setValue(t),this.notificationService.showCreateSuccess()},e=>{console.log(e)}),console.log(this.form.value)}buscarMembrosTime(e){this.timeService.buscarUsuariosMembros(e).subscribe(e=>{this.usuariosList=e,this.usuariosList[0].disabled=!0},e=>{console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](o.g),a["\u0275\u0275directiveInject"](u.a),a["\u0275\u0275directiveInject"](m.a),a["\u0275\u0275directiveInject"](l.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-team-form"]],decls:4,vars:2,consts:[["cardTitle","Dados do Time",3,"options"],[1,"row"],[1,"col-md-12"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-group"],["type","text","formControlName","name","placeholder","Nome",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["class","form-group",4,"ngIf"],["type","submit",1,"btn","btn-primary"],[1,"invalid-feedback"],[4,"ngIf"],["formControlName","users","addTagText","Criar Novo","bindLabel","name","bindValue","_id",3,"addTag","multiple","items","remove"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"app-card",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"div",2),a["\u0275\u0275template"](3,g,9,7,"form",3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("options",!1),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",t.form))},directives:[c.a,i.NgIf,o.H,o.s,o.j,o.c,o.r,o.i,i.NgClass,d.a,f.a],styles:[""]}),e})()}];let I=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[n.j.forChild(S)],n.j]}),e})();r.d(t,"MatchesTableModule",(function(){return C}));let C=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.CommonModule,I,s.a,i.CommonModule]]}),e})()}}]);